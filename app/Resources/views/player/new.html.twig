{% extends 'base.html.twig' %}

{% block body %}
    <h1>Player creation</h1>

    {{ form_start(form) }}
	    {{ form_label(form.name) }}
	    {{ form_widget(form.name) }}
	    {{ form_errors(form.name) }}
        <a href="#" id="generateName">Random Name</a>
        {{ form_widget(form) }}
        <input type="submit" value="Create" />
    {{ form_end(form) }}

    <ul>
        <li>
            <a href="{{ path('player_index') }}">Back to the list</a>
        </li>
    </ul>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script>
		$(document).ready(function(){
			$('html').addClass('JQuery-Fonctionne!');
			generateName();
			$('#generateName').click(function(){
				generateName();
		 	});
		});
		function generateName() {
			$.ajax({
				url: 'https://randomuser.me/api/',
				dataType: 'json',
				success: function(data) {
					$("input#quidditchbundle_player_name").val(
						data.results[0].name.first + " " + data.results[0].name.last
					);
				}
			});
		}
    </script>
{% endblock %}