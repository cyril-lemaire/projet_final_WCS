{% extends 'base.html.twig' %}

{% block body %}
    <h1>Teams list</h1>

    <ul>
        <li>
            <a href="{{ path('team_new') }}" class="btn green">Create a new team</a>
        </li>
        <li>
            <a href="{{ path('team_autocreate') }}" class="btn">Generate a new team automatically</a>
        </li>
    </ul>

    <table>
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Country</th>
                <th>Total Exp</th>
                <th>Average Stamina</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="teams-display">
            {# Teams come here! (through teamsDisplay.js) #}
        </tbody>
    </table>
	<button id="load-more-teams" class="btn">Load more</button>


{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script>
		{#	Couldn't be declared in a separate js file as it uses twig path function :/
			Maybe should I put a .js.twig in the public/javascript, but that seems ugly
		#}
		function displayTeams(pageIndex) {
			$.ajax({
				url: '{{ path('teams_display') }}/' + pageIndex,
				success: function(data) {
					$('#teams-display').append(data);
				}
			});
		}
		$(document).ready(function(){
			var i = 1;
			displayTeams(i++);
			$('#load-more-teams').click(function(){
				displayTeams(i++);
			});
		});
    </script>

{% endblock %}